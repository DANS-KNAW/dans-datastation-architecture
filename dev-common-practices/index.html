<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Common practices - dans-datastation-architecture</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Common practices";
        var mkdocs_page_input_path = "dev-common-practices.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> dans-datastation-architecture
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">About</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../core-services/">Core Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../datastation/">Data Station</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configurations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../configurations/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dataversenl/">DataverseNL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vaas/">Vault as a Service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../temporary-vault-config/">Temporary Vault</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">External interfaces</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../external-interfaces/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sword/">SWORD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data-vault-storage-root/">Data Vault Storage Root</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Internal interfaces</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../internal-interfaces/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deposit-directory/">Deposit Directory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Components</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../components/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dataverse/">Dataverse</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dans-microservices/">DANS Microservices & Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dans-libraries/">DANS Libraries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skosmos/">Skosmos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nbn-resolver/">NBN Resolver (KB)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../object-store/">Object Store (SURF)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data-archive/">Data Archive (SURF)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Data flow</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../vault-pipeline/">Data Vault pipeline</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../dev/">Overview</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Common practices</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#code-style">Code Style</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#lombok">Lombok</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dependency-management">Dependency Management</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#javadocs">JavaDocs</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../status/">Build status</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">dans-datastation-architecture</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Development</li>
      <li class="breadcrumb-item active">Common practices</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/DANS-KNAW/dans-datastation-architecture/edit/master/docs/dev-common-practices.md">Edit on DANS-KNAW/dans-datastation-architecture</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="common-practices">Common Practices<a class="headerlink" href="#common-practices" title="Permanent link">&para;</a></h1>
<p>Here are some miscellaneous common practices to follow when developing for the DANS Data Station Architecture. It is assumed that you are using IntelliJ. If
this is not the case, please adapt accordingly.</p>
<h2 id="code-style">Code Style<a class="headerlink" href="#code-style" title="Permanent link">&para;</a></h2>
<ul>
<li>Install the IntelliJ <a href="../dev/dans-intellij-codestyles.xml">code style</a> and <a href="../dev/dans-intellij-inspections.xml">inspections</a>. Format the source code with these settings in our own projects. Resolve the warnings
  indicated by the inspections.</li>
<li>In Dataverse try to minimize code changes due to reformatting, so only apply formatting to code that you have changed anyway.</li>
<li>In the POM file keep the order the of the elements as follows (note that some are optional):<ul>
<li><code>modelVersion</code></li>
<li><code>parent</code></li>
<li><code>groupId</code></li>
<li><code>artifactId</code></li>
<li><code>version</code></li>
<li><code>name</code></li>
<li><code>url</code></li>
<li><code>description</code></li>
<li><code>inceptionYear</code></li>
<li><code>properties</code></li>
<li><code>scm</code></li>
<li><code>dependencyManagement</code></li>
<li><code>dependencies</code></li>
<li><code>build</code></li>
<li><code>repositories</code></li>
<li><code>distributionManagement</code></li>
<li><code>profiles</code></li>
</ul>
</li>
</ul>
<h3 id="lombok">Lombok<a class="headerlink" href="#lombok" title="Permanent link">&para;</a></h3>
<p>Use <a href="https://projectlombok.org/" target="_blank">Lombok</a> for:</p>
<ul>
<li>Adding loggers with the <code>@Slf4j</code> annotation (this names the logger after the fully qualified class name automatically).</li>
<li>Creating getters, setters and constructors on value objects (i.e. the main purpose of the object is to store values and not to perform operations).</li>
</ul>
<h2 id="dependency-management">Dependency Management<a class="headerlink" href="#dependency-management" title="Permanent link">&para;</a></h2>
<p>Dependency management of Java projects is done with Maven. Projects should inherit from <code>dd-parent</code>. The first thing that most projects will include is
<code>io.dropwizard:dropwizard-core</code>.</p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<ul>
<li>Unit test names should be as descriptive as possible. Since this will often involve creating long test names, use <code>snake_case</code> instead of <code>camelCase</code> here.</li>
<li>Unit tests will often need to write some temporary data to disk. The location for this is <code>&lt;project-dir&gt;/target/test/&lt;ClassNameOfUnitTest&gt;</code>. By working under
  <code>target</code> we make sure the unit tests don't interfere with the project itself or the test files we are using for <a href="#debugging">debugging</a>.</li>
<li>Unit tests should clear their temporary directory <strong>before</strong> the tests start, but leave everything on disk after finishing. This allows you to diagnose
  any problems with a test by running it and inspecting its temporary directory.</li>
</ul>
<h2 id="debugging">Debugging<a class="headerlink" href="#debugging" title="Permanent link">&para;</a></h2>
<p>For debugging use the scripts in <a href="https://github.com/DANS-KNAW/dans-dev-scripts" target="_blank">dans-dev-scripts</a>. Start the environment with <code>start-env.sh</code>. This sets up configuration files under
<code>&lt;project-dir&gt;/etc/</code> for use during debugging and create directory to store input and output files under <code>&lt;project-dir&gt;/data/</code>. Start the program with the
<code>start-*debug.sh</code> helper scripts and then attach IntelliJ to the VM.</p>
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h2>
<p>Each module has its associated documentation site, which is published at <code>dans-knaw.github.io</code>. The archetype sets up the project with a skeleton site. Use
the <code>start-mkdocs.sh</code> script in <a href="https://github.com/DANS-KNAW/dans-dev-scripts" target="_blank">dans-dev-scripts</a> to start the site locally and see what it looks like after you have made your changes.</p>
<p>Each documentation site follows a common structure which depends on the type of module: library, microservice, or command-line application. See existing
documentation sites for examples.</p>
<h3 id="javadocs">JavaDocs<a class="headerlink" href="#javadocs" title="Permanent link">&para;</a></h3>
<p>If the project is a library it should include JavaDocs. Extensive code examples are best relegated to separated pages, outside
the JavaDocs, so that you can make full use of the extended Markdown support of mkdocs. You can then link to those from the JavaDocs.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../dev/" class="btn btn-neutral float-left" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../status/" class="btn btn-neutral float-right" title="Build status">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/DANS-KNAW/dans-datastation-architecture" class="fa fa-code-fork" style="color: #fcfcfc"> DANS-KNAW/dans-datastation-architecture</a>
        </span>
    
    
      <span><a href="../dev/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../status/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
